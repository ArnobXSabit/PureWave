<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>PureWave</title>
<!-- Font Awesome -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css" crossorigin="anonymous" referrerpolicy="no-referrer" />

<link href="https://cdn.jsdelivr.net/npm/heroicons@2.0.13/dist/heroicons.min.css" rel="stylesheet">

<link rel="icon" type="image/x-icon" href="favicon.png">

<style>
/* ---------- Global Styles ---------- */
* { margin:0; padding:0; box-sizing:border-box; font-family:'Poppins', Arial, sans-serif; }
body { background:#fff; color:#333; line-height:1.6; font-size:16px; padding-top:100px; }

/* ---------- Navbar ---------- */
.navbar{
  height: 70px;
  width: 98%;
  left: 1%;
  right: 1%;
  position: fixed;
  top: 0;
  z-index: 1000;
  background: #fff;
  box-shadow: 0 2px 5px rgba(114,114,114,0.1);
  display: flex;
  align-items: center;

  /* Rounded bottom corners */
  border-bottom-left-radius: 10px;   /* adjust size as needed */
  border-bottom-right-radius: 10px;
}

.duplicate-navbar {
  height: 100px;
  width: 100%;
  position: fixed;
  top: 0;
  z-index: 1000;
  background: #fff;
  box-shadow: 0 2px 5px rgba(114,114,114,0.1);
  display: flex;
  align-items: center;
}

.nav-container {
  display: flex;
  justify-content: space-between;
  align-items: center; /* vertical center */
  margin: 0 auto;        /* cut space from left and right */
  width: 98%;
  padding: 0 16px;
  height: 100%;
  gap: 16px;
}

.nav-left {
  display: flex;
  align-items: center;
  gap: 12px; /* or whatever space you want */
}

/* brand logo */
.brand-icon {
  height: 20px;   
  width: auto;
  display: block;
}
.brand-icon-duplicate-navbar {
  height: 25px;   
  width: auto;
  display: block;
}

/* Nav links */
.nav-links {
  display: flex;
  align-items: center; /* vertical center */
  gap: 25px; /* or whatever space you want */
}
.nav-links a { color:#222; font-size:1.0rem; transition: color 0.3s; position:relative; }
.nav-links a:hover { color:#3a91f5; }

/* Duplicate Navbar */
.duplicate-navbar { z-index:1100; transition: transform 0.3s ease, opacity 0.3s ease; }
.duplicate-navbar.hidden { transform: translateY(-100%); opacity: 0; }

/* Adjust duplicate navbar height to 100px (top 30 + bottom 70) */
.duplicate-navbar {
  height: 120px;
  display: flex;
  flex-direction: column;
  z-index: 1100;
  transition: transform 0.3s ease, opacity 0.3s ease;
}

.duplicate-navbar .nav-container {
  width: 1600px;       /* fixed width */
  max-width: 100%;      /* optional: never exceed 98% on smaller screens */
  margin: 0 auto;      /* center it */
}


/* promo bar full control here */

.top-bar {
  display: flex;
  width: 100%;
  height: 50px;
  background-color: #f0f2f5 ; 
}

/* Each section */
.top-bar-section {
  flex: 1; /* equal width by default */
  display: flex;
  align-items: center;
  justify-content: center; /* default center */
  transition: all 0.3s;
}

/* Individual control */

/* Promo 1 */
.promo1 {
  flex: 0 0 25% ; 
  background-color: #000000;
  padding: 0 8px;
}
.promo1 .top-item {
  font-weight: 700;      /* bold */
  color:white ; 
  text-decoration: none; /* no underline */
  font-size: .88rem;    /* smaller */
}

.thunder-icon {
  color: #e7ad5c;       /* gold/yellow */
  margin-right: 3px;    /* space between icon and text */
  font-size: 1.3rem;    /* adjust size */
  vertical-align: middle;
}

/* Promo 2 */
.promo2 {
  flex: 0 0 25.5% ; 
  padding: 0 12px;
}

/* Promo 3 */
.promo3 {
  flex: 0 0 17% ; 
  background-color: #000000;
  padding: 0 6px;
}
.promo3 .top-item {
  font-weight: 400;      /* bold */
  color:white ; 
  text-decoration: none; /* no underline */
  font-size: 0.80rem;    /* smaller */
}
.promo3 .fa-truck {
  transform: scaleY(-1); /* flips the truck horizontally */
  transform: scaleX(-1);
}

/* Promo 4 */
.promo4 { 
  flex: 0 0 0.5% ; 
  padding: 0 10px; 
}

/* Promo 5 */
.promo5 { 
  flex: 0 0 15% ; 
  background-color: #000000;
  padding: 0 12px; }
.promo5 .top-item {
  font-weight: 400;      /* bold */
  color:white ; 
  text-decoration: none; /* no underline */
  font-size: 0.80rem;    /* smaller */
}

.promo6 .top-item {
  font-weight: 500;      /* bold */
  color:rgb(87, 87, 87) ; 
  text-decoration: none; /* no underline */
  font-size: 0.90rem;    /* smaller */
}

.promo7 .top-item {
  font-weight: 500;      /* bold */
  color:#3a91f5; 
  text-decoration: none; /* no underline */
  font-size: 0.90rem;    /* smaller */
}


/* ---------- Cart ---------- */
.nav-cart-count {position: absolute;top: -8px;right: -8px;background: #3a91f5;color: #fff;font-size: 0.75rem;font-weight: bold;width: 18px;height: 18px;border-radius: 50%;display: flex;justify-content: center;align-items: center;}
#floatingCart {position: fixed;bottom: 30px;right: 30px;width:50px;height:50px;background:#3a91f5;color:#fff;border-radius:50%;display:flex;justify-content:center;align-items:center;font-size:1.5rem;z-index:1200;box-shadow:0 4px 20px rgba(0,0,0,0.3);}
#floatingCart span { position:absolute; top:-8px; right:-8px; width:18px; height:18px; background:#ff0000; color:#fff; font-size:0.75rem; border-radius:50%; display:flex; justify-content:center; align-items:center; font-weight:bold; }

/* Center search bar */
.nav-center{ 
  display: flex;
  align-items: center;
  gap: 12px; /* or whatever space you want */
}
.nav-center input[type="text"] {
  width:100%;
  max-width:300px;
  padding:8px 12px;
  border:1px solid #ccc;
  border-radius:24px 0 0 24px;
  outline:none;
}
.nav-center button {
  padding:8px 16px;
  border:none;
  background:#000;
  color:#fff;
  border-radius:0 24px 24px 0;
  cursor:pointer;
  transition: background 0.3s;
}
.nav-center button:hover { background:#333; }

/* Autocomplete dropdown */
.autocomplete-items {
  position: absolute;
  top: 100%;
  left: 0;
  width: 100%;
  background: #fff;
  border: 1px solid #ccc;
  border-radius: 8px;
  max-height: 250px;
  overflow-y: auto;
  box-shadow: 0 8px 20px rgba(0,0,0,0.15);
  z-index: 9999;
  padding: 4px 0;
  margin-top: 4px;
}
.autocomplete-items div {
  padding: 10px 16px;
  cursor: pointer;
  font-size: 0.95rem;
  color: #333;
  transition: background 0.2s, color 0.2s;
}
.autocomplete-items div:hover,
.autocomplete-active {
  background: #3a91f5;
  color: #fff;
  border-radius: 6px;
}

/* ---------- Responsive ---------- */
@media (max-width: 768px) { 
  .nav-links { gap: 16px; font-size: 1.2rem; }
  .nav-center input[type="text"] { max-width: 90vw; }
  #navbarSearchDropdown { width: 90vw !important; left: 5vw; }
}

.hamburger {
  display: flex;
  flex-direction: column;
  justify-content: space-between;
  width: 20px;
  height: 15px;
  background: transparent;
  border: none;
  cursor: pointer;
  padding: 0;
}

.hamburger span {
  display: block;
  height: 3px;
  width: 100%;
  background: #222;
  border-radius: 2px;
  transition: all 0.3s ease;
}

/* Optional: animate hamburger into X when active */
.hamburger.active span:nth-child(1) { transform: rotate(45deg) translate(5px, 5px); }
.hamburger.active span:nth-child(2) { opacity: 0; }
.hamburger.active span:nth-child(3) { transform: rotate(-45deg) translate(5px, -5px); }

/* ---------- Sidebar ---------- */
#sidebar { position: fixed; top: 100px; left: -400px; width: 400px; height: calc(100% - 100px); background:#fafafa; color:#1a1a1a; overflow-y:auto; box-shadow:3px 0 12px rgba(0,0,0,0.1); padding:20px; transition:left 0.3s ease; z-index:1200; }
#sidebar.open { left:0; }
#sidebar::-webkit-scrollbar { width:8px; }
#sidebar::-webkit-scrollbar-thumb { background: rgba(0,0,0,0.25); border-radius:4px; }
#sidebar h2 { margin-top:0; margin-bottom:12px; font-size:1.3rem; font-weight:700; }
#sidebar ul { list-style:none; padding-left:0; margin:0; }
#sidebar ul li { margin:6px 0; }
#sidebar ul li .flex-row { display:flex; justify-content:space-between; align-items:center; }
#sidebar ul li a { text-decoration:none; color:#222; font-weight:600; transition:color 0.2s ease; }
#sidebar ul li a:hover { color:#3a91f5; }
#sidebar ul li span.toggle { cursor:pointer; font-weight:900; font-size:1.5rem; color:#000; margin-left:8px; user-select:none; }
#sidebar ul li a.grand { font-weight:700; font-size:1.1rem; }
#sidebar ul li a.parent { font-weight:600; font-size:1rem; }
#sidebar ul li a.child { font-weight:500; font-size:0.95rem; }

/* ---------- Footer ---------- */
footer { background:#222; color:#fff; padding:40px 0; text-align:center; font-size:0.9rem; }

@media (max-width: 500px) { #sidebar { width: 80vw; } }

/* Floating background & icons */
#floatingBackground {
  position: fixed;
  top: 100px;
  left: 0;
  width: 100%;
  height: calc(100% - 100px);
  pointer-events: none;
  overflow: hidden;
  z-index: 1;
}
.floating-icon {
  position: absolute;
  width: 60px;
  height: 60px;
  opacity: 0.1;
  animation: float 12s ease-in-out infinite;
}
@keyframes float {
  0%   { transform: translateY(0) translateX(0) rotate(0deg); }
  25%  { transform: translateY(-20px) translateX(10px) rotate(10deg); }
  50%  { transform: translateY(20px) translateX(-10px) rotate(-10deg); }
  75%  { transform: translateY(-10px) translateX(5px) rotate(5deg); }
  100% { transform: translateY(0) translateX(0) rotate(0deg); }
}

/* Accessibility */
#sidebarToggle, #sidebarToggle2 { aria-label: "Toggle Sidebar Menu"; }
</style>
</head>
<body>

<!-- Duplicate Navbar -->
<header class="duplicate-navbar" id="duplicateNavbar">

<!-- Top Promo Bar -->
<div class="top-bar">
  <div class="top-bar-section promo1"><a href="sale.html" class="top-item">
    <i class="fas fa-bolt thunder-icon"></i>
  EXCLUSIVE T-SHIRTS ON SALE | Limited Time Only
  <span class="arrow-circle"><i class="fas fa-arrow-right"></i></span>
</a>
</div>
  <div class="top-bar-section promo2"><a href="#" class="top-item"></a></div>
  <div class="top-bar-section promo3"><a href="bulk.html" class="top-item"><i class="fas fa-truck"></i> Order Bulk / Corporate Sale</a></div>
  <div class="top-bar-section promo4"><a href="#" class="top-item"></a></div>
  <div class="top-bar-section promo5"><a href="locations.html" class="top-item"><i class="fas fa-location-dot"></i> Store Location</a></div>
  <div class="top-bar-section promo6"><a href="about.html" class="top-item"><i class="fas fa-circle-question"></i> About Us</a></div>
  <div class="top-bar-section promo7"><a href="login.html" class="top-item">
      <i class="fas fa-right-to-bracket" style="margin-right:4px;"></i> Login
      </a>
    </div>
</div>

  <!-- Bottom Navbar (Existing Duplicate Navbar Content) -->
  <div class="nav-container">
    <div class="nav-left">
      <a href="index.html" class="brand" style="display:flex;align-items:center;gap:8px;">
        <img src="home.svg" alt="PureWave Logo" class="brand-icon-duplicate-navbar">
      </a>
    </div>
    <div>
          <nav class="nav-links">
      <a href="products.html" title="Shop"><i class="fas fa-store"></i></a>
      </nav>
    </div>
    <div class="nav-center">
      <form id="searchForm" style="display:flex; width:100%; max-width:400px; position:relative;">
        <input type="text" id="searchInput" placeholder="Search products...">
        <button type="submit"><i class="fas fa-search"></i></button>
      </form>
    </div>
    <nav class="nav-links">
      <a href="cart.html" title="Cart">
        <i class="fas fa-shopping-cart"></i>
        <span class="nav-cart-count" id="duplicateNavbarCartCount">0</span>
      </a>
    </nav>
  </div>
</header>


<!-- Original Navbar -->
<header class="navbar" id="navbar">
  <div class="nav-container">
    <div class="nav-left">
      <button id="sidebarToggle" class="hamburger" aria-label="Toggle Sidebar">
        <span></span>
        <span></span>
        <span></span>
      </button>
        <a href="index.html" class="brand" style="display:flex;align-items:center;gap:8px;">
          <img src="home.svg" alt="PureWave Logo" class="brand-icon">
        </a>
    </div>
    <nav class="nav-links">
      <a href="index.html" title="Home"><i class="fas fa-home"></i></a>
      <a href="javascript:void(0);" id="navbarSearchIcon" title="Search"><i class="fas fa-search"></i></a>
      <a href="products.html" title="Shop"><i class="fas fa-store"></i></a>
      <a href="cart.html" title="Cart">
        <i class="fas fa-shopping-cart"></i>
        <span class="nav-cart-count" id="navbarCartCount">0</span>
      </a>
      <a href="userprofile.html" title="Profile"><i class="fas fa-user"></i></a>
    </nav>

    <div id="navbarSearchDropdown" style="display:none;">
      <div class="nav-center">
        <form id="navbarDropdownForm" style="display:flex; width:100%; max-width:400px; position:relative;">
          <input type="text" id="navbarDropdownInput" placeholder="Search products...">
          <button type="submit"><i class="fas fa-search"></i></button>
        </form>
      </div>
    </div>
  </div>
</header>

<!-- Floating Background -->
<div id="floatingBackground"></div>

<main>
  <h2>Categories</h2>
  <h2>Categories</h2>
  <h2>Categories</h2>
  <h2>Categories</h2>
  <h2>Categories</h2>
  <h2>Categories</h2>
  <h2>Categories</h2>
  <h2>Categories</h2>
    <h2>Categories</h2>
  <h2>Categories</h2>
  <h2>Categories</h2>
  <h2>Categories</h2>
  <h2>Categories</h2>
  <h2>Categories</h2>
  <h2>Categories</h2>
  <h2>Categories</h2>
    <h2>Categories</h2>
  <h2>Categories</h2>
  <h2>Categories</h2>
  <h2>Categories</h2>
  <h2>Categories</h2>
  <h2>Categories</h2>
  <h2>Categories</h2>
  <h2>Categories</h2>
    <h2>Categories</h2>
  <h2>Categories</h2>
  <h2>Categories</h2>
  <h2>Categories</h2>
  <h2>Categories</h2>
  <h2>Categories</h2>
  <h2>Categories</h2>
  <h2>Categories</h2>
</main>

<footer>
  &copy; 2025 PureWave. All rights reserved.
</footer>

<aside id="sidebar">
  <h2>Categories</h2>
  <ul id="sidebarCategories"></ul>
</aside>

<!-- Floating Cart -->
<a href="cart.html" id="floatingCart">
  <i class="fas fa-shopping-cart"></i>
  <span id="cartCount">0</span>
</a>

<script>
// ---------- Backend & Categories ----------
const BACKEND_URL = "https://purewave.onrender.com";
let allCategories = [];

async function loadAllCategories() {
  try { const res = await fetch(`${BACKEND_URL}/api/categories`); allCategories = await res.json(); }
  catch(err) { console.error(err); }
}

async function loadSidebarCategories() {
  try {
    const res = await fetch(`${BACKEND_URL}/api/categories`);
    const categories = await res.json();
    const container = document.getElementById("sidebarCategories");
    const map = {};
    categories.forEach(cat => { const pid = cat.parent_id ?? 0; if(!map[pid]) map[pid]=[]; map[pid].push(cat); });
    function createList(pid, depth=0) {
      if(!map[pid]) return null;
      const ul = document.createElement('ul'); ul.style.paddingLeft = depth?'14px':'0';
      map[pid].forEach(cat=>{
        const li=document.createElement('li');
        const hasChildren = map[cat.category_id] && map[cat.category_id].length>0;
        const flex=document.createElement('div'); flex.className='flex-row';
        const a=document.createElement('a'); a.textContent=cat.category_name;
        a.href = hasChildren ? '#' : `products.html?category=${cat.category_id}`;
        a.className = depth===0?'grand':depth===1?'parent':'child';
        flex.appendChild(a);
        const childrenUl=createList(cat.category_id,depth+1);
        if(childrenUl){
          childrenUl.style.display='none';
          const toggle=document.createElement('span'); toggle.textContent='+'; toggle.className='toggle';
          toggle.addEventListener('click', e=>{e.stopPropagation(); childrenUl.style.display=childrenUl.style.display==='block'?'none':'block'; toggle.textContent=childrenUl.style.display==='block'?'−':'+';});
          a.addEventListener('click', e=>{if(hasChildren){e.preventDefault(); toggle.click();}});
          flex.appendChild(toggle); li.appendChild(flex); li.appendChild(childrenUl);
        } else li.appendChild(flex);
        ul.appendChild(li);
      });
      return ul;
    }
    const topUl=createList(0); if(topUl) container.appendChild(topUl);
  } catch(err){ console.error(err); }
}

// ---------- Sidebar toggle ----------
const sidebarToggle=document.getElementById('sidebarToggle');
const sidebarToggle2=document.getElementById('sidebarToggle2');
const sidebar=document.getElementById('sidebar');
sidebarToggle.addEventListener('click', () => {
  sidebar.classList.toggle('open');
  sidebarToggle.classList.toggle('active'); // animate hamburger
});

document.addEventListener('click', e=>{ if(!sidebar.contains(e.target)&&!sidebarToggle.contains(e.target)&&!sidebarToggle2.contains(e.target)) sidebar.classList.remove('open'); });
function adjustSidebar() { const navHeight=document.querySelector('.navbar').offsetHeight; sidebar.style.top=navHeight+'px'; sidebar.style.height=`calc(100% - ${navHeight}px)`; }
window.addEventListener('load', adjustSidebar); window.addEventListener('resize', adjustSidebar);

// ---------- Cart count ----------
function updateCartCount(){
  let cartItems = JSON.parse(localStorage.getItem('cart'))||[];
  if(!Array.isArray(cartItems)&&typeof cartItems==='object') cartItems=Object.values(cartItems).reduce((s,q)=>s+q,0);
  else cartItems=cartItems.length;
  document.getElementById('cartCount').textContent=cartItems;
  document.getElementById('navbarCartCount').textContent=cartItems;
  document.getElementById('duplicateNavbarCartCount').textContent=cartItems;
}

// ---------- Duplicate navbar scroll ----------
const duplicateNavbar=document.getElementById('duplicateNavbar');
let lastScroll=window.scrollY;
window.addEventListener('scroll',()=>{
  const current=window.scrollY;
  if(current>lastScroll && current>50) duplicateNavbar.classList.add('hidden');
  else duplicateNavbar.classList.remove('hidden');
  lastScroll=current;
});

// ---------- Autocomplete ----------
function setupAutocomplete(input){
  let currentFocus=-1; let list;
  input.addEventListener('input', function(){
    closeList(); if(!this.value) return;
    const val=this.value.toLowerCase();
    const matches=allCategories.filter(c=>c.category_name.toLowerCase().includes(val));
    if(!matches.length) return;
    list=document.createElement('div'); list.className='autocomplete-items';
    list.style.width = input.offsetWidth + 'px';
    matches.forEach(cat=>{
      const item=document.createElement('div'); item.textContent=cat.category_name;
      item.addEventListener('click', ()=>{window.location.href=`products.html?category=${cat.category_id}`;});
      list.appendChild(item);
    });
    input.parentNode.appendChild(list);
  });
  input.addEventListener('keydown', function(e){
    if(!list) return;
    const items=list.getElementsByTagName('div');
    if(e.key==='ArrowDown'){ currentFocus++; addActive(items); }
    else if(e.key==='ArrowUp'){ currentFocus--; addActive(items); }
    else if(e.key==='Enter'){ e.preventDefault(); if(currentFocus>-1) items[currentFocus].click(); }
    else if(e.key==='Escape'){ closeList(); }
    function addActive(items){ removeActive(items); if(currentFocus>=items.length) currentFocus=0; if(currentFocus<0) currentFocus=items.length-1; items[currentFocus].classList.add('autocomplete-active'); }
    function removeActive(items){ for(let i=0;i<items.length;i++) items[i].classList.remove('autocomplete-active'); }
  });
  document.addEventListener('click', function(e){ if(e.target!==input) closeList(); });
  function closeList(){ if(list) list.remove(); currentFocus=-1; }
}

// ---------- Search forms ----------
function setupSearchForm(form,input){ form.addEventListener('submit', e=>{ e.preventDefault(); const q=input.value.trim(); if(q) window.location.href=`products.html?search=${encodeURIComponent(q)}`; }); }

// ---------- Floating Icons ----------
const floatingBg = document.getElementById('floatingBackground');
let ICON_COUNT = window.innerWidth < 768 ? 50 : 200;
const ICON_SIZE = 60;
const icons = [];

function isOverlapping(x, y, existingIcons) {
  for (let icon of existingIcons) {
    const dx = x - icon.dataset.x;
    const dy = y - icon.dataset.y;
    const distance = Math.sqrt(dx*dx + dy*dy);
    if (distance < ICON_SIZE + 10) return true;
  }
  return false;
}

function createFloatingIcons() {
  floatingBg.innerHTML = '';
  icons.length = 0;
  const vw = window.innerWidth;
  const vh = window.innerHeight - 100;
  for (let i = 0; i < ICON_COUNT; i++) {
    const icon = document.createElement('img');
    icon.src = 'w-icon.svg';
    icon.className = 'floating-icon';
    let x, y, attempts = 0;
    do { 
      x = Math.random() * (vw - ICON_SIZE); 
      y = Math.random() * (vh - ICON_SIZE); 
      attempts++; 
      if (attempts > 100) break; 
    } while (isOverlapping(x, y, icons));
    icon.dataset.x = x; 
    icon.dataset.y = y;
    icon.style.left = x + 'px'; 
    icon.style.top = y + 'px';
    floatingBg.appendChild(icon); 
    icons.push(icon);
  }
}

let ticking = false;
function updateIconsOnScroll() {
  if (!ticking) {
    window.requestAnimationFrame(() => {
      const scrollY = window.scrollY;
      const vh = window.innerHeight - 100;
      icons.forEach(icon => {
        let y = parseFloat(icon.dataset.y) - scrollY * 0.2;
        if (y < -ICON_SIZE) {
          y = vh + Math.random() * 100;
          icon.dataset.x = Math.random() * (window.innerWidth - ICON_SIZE);
          icon.dataset.y = y;
          icon.style.left = icon.dataset.x + 'px';
        }
        icon.style.transform = `translateY(${y}px)`;
      });
      ticking = false;
    });
    ticking = true;
  }
}

function handleResize() {
  ICON_COUNT = window.innerWidth < 768 ? 50 : 200;
  createFloatingIcons();
  updateIconsOnScroll();
}

// ---------- Initialize ----------
document.addEventListener('DOMContentLoaded', async ()=>{
  await loadAllCategories();
  loadSidebarCategories();
  setupAutocomplete(document.getElementById('searchInput'));
  setupAutocomplete(document.getElementById('navbarDropdownInput')); // fixed typo
  setupSearchForm(document.getElementById('searchForm'), document.getElementById('searchInput'));
  setupSearchForm(document.getElementById('navbarDropdownForm'), document.getElementById('navbarDropdownInput'));
  updateCartCount();
  createFloatingIcons();

  const searchIcon=document.getElementById('navbarSearchIcon');
  const dropdown=document.getElementById('navbarSearchDropdown');
  searchIcon.addEventListener('click', e=>{
    e.stopPropagation();
    dropdown.style.display=dropdown.style.display==='block'?'none':'block';
    dropdown.querySelector('input').focus();
  });
  document.addEventListener('click', e=>{
    if(!dropdown.contains(e.target)&&e.target!==searchIcon) dropdown.style.display='none';
  });
});

// Use requestAnimationFrame on scroll for smoother performance
window.addEventListener('scroll', updateIconsOnScroll);
window.addEventListener('resize', handleResize);

</script>

</body>
</html>
